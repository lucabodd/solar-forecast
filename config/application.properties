# Solar Forecast Warning System - Configuration

# ========================================
# LOCATION SETTINGS
# ========================================
# Your geographic coordinates for weather forecast
# Valencia, Spain (L'Enova)
latitude=39.47
longitude=-0.38

# ========================================
# ALERT THRESHOLD CRITERIA
# Duration-based alert: triggers when production drops below threshold for 6+ consecutive hours
# ========================================

# Production Alert Threshold (kW)
# Alert if estimated output drops below this value
# For 8.9kW system: use 2.0 kW
production_alert_threshold_kw=3.0

# Duration Threshold (hours)
# Alert only if below production threshold for this many consecutive hours
# Prevents false positives from brief cloud cover
# Recommended: 6 hours
duration_threshold_hours=4

# ========================================
# ANALYSIS WINDOW (DEPRECATED - now uses automatic daylight detection)
# The system now automatically detects daylight hours using GHI (solar irradiance)
# This adapts to seasonal changes and is more accurate than fixed times
# These settings are kept for backward compatibility but are no longer used
# ========================================
# analysis_window_start=8  # DEPRECATED - system now uses GHI-based daylight detection
# analysis_window_end=20   # DEPRECATED - system now uses GHI-based daylight detection

# ========================================
# DAYLIGHT DETECTION THRESHOLD
# ========================================
# GHI (Global Horizontal Irradiance) threshold in W/m² to consider as daylight
# This value is used consistently across all metrics and analysis
# Typical values: 50-100 W/m² (sunrise/sunset range)
# Lower values (30-50): Capture twilight hours, more sensitive to early/late sun
# Higher values (100-200): Focus on peak daylight hours only
# Recommended: 50 W/m² for full daylight period detection
daylight_ghi_threshold=50.0

# ========================================
# SOLAR PANEL CONFIGURATION
# ========================================
# Rated capacity in kilowatts (at Standard Test Conditions)
# Your system: 16 panels × 560W = 8.96 kW ≈ 8.9 kW
# This is the manufacturer's rated output at STC (1000 W/m², 25°C)
# The rated capacity ALREADY includes panel efficiency (~20% silicon conversion)
rated_capacity_kw=8.9

# Panel efficiency (DEPRECATED - not used in calculations)
# The rated capacity already accounts for panel efficiency
# This setting is kept for backward compatibility but is not used
# Typical silicon panels: 0.18-0.22 (18-22% conversion efficiency)
# panel_efficiency=0.20  # DEPRECATED - do not use

# Inverter efficiency (0.0-1.0)
# Accounts for DC to AC conversion losses
# Typical: 0.95-0.98 (95-98% efficient)
inverter_efficiency=0.97

# Temperature coefficient (% per °C above 25°C)
# Typical: -0.4 to -0.5
# Formula: efficiency_adjustment = 1 - (temp_coefficient/100 * (temp - 25))
temp_coefficient=-0.4

# ========================================
# EMAIL CONFIGURATION
# ========================================
# Gmail app password (NOT your regular Gmail password)
# Generate at: https://myaccount.google.com/apppasswords
gmail_app_password=ygqz dvnk ofzk wdbm

# Your Gmail address
gmail_sender=lucabodd@gmail.com

# Recipient email address
recipient_email=lucabodd@gmail.com

# ========================================
# CRON SCHEDULING
# ========================================
# Hour to start checking during daytime (0-23, 24-hour format)
daytime_start_hour=8

# Hour to stop checking during daytime (0-23, 24-hour format)
# Use 24 for no upper limit, or specific hour like 18 for 6pm
daytime_end_hour=20

# ========================================
# API RETRY CONFIGURATION
# ========================================
# Number of retries for Open-Meteo API calls
api_retry_attempts=3

# Delay between retries in seconds
api_retry_delay_seconds=5

# Connection timeout in seconds
api_timeout_seconds=10

# ========================================
# PUSHOVER PUSH NOTIFICATIONS (Optional)
# ========================================
# Pushover user key - get from https://pushover.net
# Leave blank to disable push notifications
pushover_user_key=u8734jps3g431j4y4ra6cuhyq7utfm

# Pushover app token - create app at https://pushover.net/apps/build
# Leave blank to disable push notifications
pushover_api_token=avdt42tfktahzfupe5caxk9vunoqfp

# ========================================
# DAYLIGHT DETECTION
# ========================================
# GHI threshold for daylight detection (W/m²)
# Hours with GHI below this are considered nighttime
# Default: 50 W/m²
daylight_ghi_threshold=50

# ========================================
# CHART & ANALYSIS SETTINGS
# ========================================
# Hours to display in charts (default: 48)
chart_display_hours=72

# Hours to analyze for alert conditions (default: 24)
alert_analysis_hours=36

# Nighttime compression factor for charts (0.0-1.0)
# Lower values compress nighttime hours more
# Default: 0.05 (night hours take 5% of day hour spacing)
night_compression_factor=0.05